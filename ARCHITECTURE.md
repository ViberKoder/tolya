# üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Jetton 2.0

–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤.

## üìä –û–±—â–∞—è —Å—Ö–µ–º–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      TON Blockchain                          ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ              Jetton Minter Contract                   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  Storage:                                     ‚îÇ    ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚Ä¢ total_supply: int                         ‚îÇ    ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚Ä¢ admin_address: slice                      ‚îÇ    ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚Ä¢ jetton_content: cell (–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ)        ‚îÇ    ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚Ä¢ jetton_wallet_code: cell (–∫–æ–¥ –∫–æ—à–µ–ª—å–∫–∞)  ‚îÇ    ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                                                       ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  Operations:                                          ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ mint() - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤                   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ burn_notification() - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Å–∂–∏–≥–∞–Ω–∏–∏      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ change_admin() - —Å–º–µ–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞             ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ change_content() - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö          ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ provide_wallet_address() - –ø–æ–ª—É—á–∏—Ç—å –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                          ‚îÇ                                   ‚îÇ
‚îÇ                          ‚îÇ —Å–æ–∑–¥–∞–µ—Ç –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç               ‚îÇ
‚îÇ                          ‚ñº                                   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îÇ
‚îÇ  ‚îÇ      Jetton Wallet Contract (User 1)        ‚îÇ            ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ            ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  Storage:                           ‚îÇ    ‚îÇ            ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚Ä¢ balance: int                     ‚îÇ    ‚îÇ            ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚Ä¢ owner_address: slice             ‚îÇ    ‚îÇ            ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚Ä¢ jetton_master_address: slice     ‚îÇ    ‚îÇ            ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚Ä¢ jetton_wallet_code: cell         ‚îÇ    ‚îÇ            ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ            ‚îÇ
‚îÇ  ‚îÇ                                              ‚îÇ            ‚îÇ
‚îÇ  ‚îÇ  Operations:                                 ‚îÇ            ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ transfer() - –ø–µ—Ä–µ–≤–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤             ‚îÇ            ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ internal_transfer() - –ø—Ä–∏–µ–º —Ç–æ–∫–µ–Ω–æ–≤      ‚îÇ            ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ burn() - —Å–∂–∏–≥–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤                ‚îÇ            ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ
‚îÇ                          ‚îÇ                                   ‚îÇ
‚îÇ                          ‚îÇ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç                   ‚îÇ
‚îÇ                          ‚ñº                                   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îÇ
‚îÇ  ‚îÇ      Jetton Wallet Contract (User 2)        ‚îÇ            ‚îÇ
‚îÇ  ‚îÇ  (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)                    ‚îÇ            ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ
‚îÇ                                                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîÑ –ü–æ—Ç–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π

### 1Ô∏è‚É£ Mint (–ß–µ–∫–∞–Ω–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤)

```
Admin
  ‚îÇ
  ‚îÇ (1) Mint message
  ‚îÇ     op: 21
  ‚îÇ     to: User1
  ‚îÇ     amount: 1000 tokens
  ‚ñº
Jetton Minter
  ‚îÇ
  ‚îÇ (2) –°–æ–∑–¥–∞–µ—Ç StateInit –¥–ª—è Wallet
  ‚îÇ     –í—ã—á–∏—Å–ª—è–µ—Ç –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞
  ‚îÇ
  ‚îÇ (3) –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç internal_transfer
  ‚îÇ     op: 0x178d4519
  ‚îÇ     amount: 1000 tokens
  ‚ñº
User1's Jetton Wallet
  ‚îÇ
  ‚îÇ (4) –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –±–∞–ª–∞–Ω—Å: 1000
  ‚îÇ
  ‚ñº
‚úÖ –¢–æ–∫–µ–Ω—ã —Å–æ–∑–¥–∞–Ω—ã
```

### 2Ô∏è‚É£ Transfer (–ü–µ—Ä–µ–≤–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤)

```
User1
  ‚îÇ
  ‚îÇ (1) Transfer message
  ‚îÇ     op: 0xf8a7ea5
  ‚îÇ     to: User2
  ‚îÇ     amount: 100 tokens
  ‚ñº
User1's Jetton Wallet
  ‚îÇ
  ‚îÇ (2) –ü—Ä–æ–≤–µ—Ä—è–µ—Ç:
  ‚îÇ     ‚Ä¢ User1 = owner? ‚úÖ
  ‚îÇ     ‚Ä¢ balance >= 100? ‚úÖ
  ‚îÇ
  ‚îÇ (3) balance -= 100
  ‚îÇ     –°–æ–∑–¥–∞–µ—Ç StateInit –¥–ª—è User2
  ‚îÇ     –í—ã—á–∏—Å–ª—è–µ—Ç –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞ User2
  ‚îÇ
  ‚îÇ (4) –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç internal_transfer
  ‚îÇ     op: 0x178d4519
  ‚îÇ     from: User1
  ‚îÇ     amount: 100 tokens
  ‚ñº
User2's Jetton Wallet
  ‚îÇ
  ‚îÇ (5) –ü—Ä–æ–≤–µ—Ä—è–µ—Ç:
  ‚îÇ     ‚Ä¢ sender = valid wallet? ‚úÖ
  ‚îÇ
  ‚îÇ (6) balance += 100
  ‚îÇ
  ‚îÇ (7) –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç transfer_notification
  ‚îÇ     (–µ—Å–ª–∏ forward_ton_amount > 0)
  ‚îÇ
  ‚îÇ (8) –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç excesses
  ‚îÇ     (–≤–æ–∑–≤—Ä–∞—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö TON)
  ‚ñº
‚úÖ –ü–µ—Ä–µ–≤–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω
```

### 3Ô∏è‚É£ Burn (–°–∂–∏–≥–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤)

```
User1
  ‚îÇ
  ‚îÇ (1) Burn message
  ‚îÇ     op: 0x595f07bc
  ‚îÇ     amount: 50 tokens
  ‚ñº
User1's Jetton Wallet
  ‚îÇ
  ‚îÇ (2) –ü—Ä–æ–≤–µ—Ä—è–µ—Ç:
  ‚îÇ     ‚Ä¢ User1 = owner? ‚úÖ
  ‚îÇ     ‚Ä¢ balance >= 50? ‚úÖ
  ‚îÇ
  ‚îÇ (3) balance -= 50
  ‚îÇ
  ‚îÇ (4) –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç burn_notification
  ‚îÇ     op: 0x7bdd97de
  ‚îÇ     amount: 50 tokens
  ‚ñº
Jetton Minter
  ‚îÇ
  ‚îÇ (5) –ü—Ä–æ–≤–µ—Ä—è–µ—Ç:
  ‚îÇ     ‚Ä¢ sender = valid wallet? ‚úÖ
  ‚îÇ
  ‚îÇ (6) total_supply -= 50
  ‚îÇ
  ‚îÇ (7) –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç excesses
  ‚îÇ     (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ)
  ‚ñº
‚úÖ –¢–æ–∫–µ–Ω—ã —Å–æ–∂–∂–µ–Ω—ã
```

## üîê –ú–æ–¥–µ–ª—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –£—Ä–æ–≤–µ–Ω—å 1: Jetton Minter

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –¢–æ–ª—å–∫–æ ADMIN –º–æ–∂–µ—Ç:                   ‚îÇ
‚îÇ  ‚Ä¢ mint() - —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–æ–∫–µ–Ω—ã          ‚îÇ
‚îÇ  ‚Ä¢ change_admin() - –º–µ–Ω—è—Ç—å –∞–¥–º–∏–Ω–∞     ‚îÇ
‚îÇ  ‚Ä¢ change_content() - –º–µ–Ω—è—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îÇ –ü—Ä–æ–≤–µ—Ä–∫–∞: equal_slices(sender, admin)
         ‚ñº
    throw_unless(73, ...)
```

### –£—Ä–æ–≤–µ–Ω—å 2: Jetton Wallet

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –¢–æ–ª—å–∫–æ OWNER –º–æ–∂–µ—Ç:                   ‚îÇ
‚îÇ  ‚Ä¢ transfer() - –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å —Ç–æ–∫–µ–Ω—ã     ‚îÇ
‚îÇ  ‚Ä¢ burn() - —Å–∂–∏–≥–∞—Ç—å —Ç–æ–∫–µ–Ω—ã            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îÇ –ü—Ä–æ–≤–µ—Ä–∫–∞: equal_slices(sender, owner)
         ‚ñº
    throw_unless(705, ...)

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –¢–æ–ª—å–∫–æ VALID WALLET –º–æ–∂–µ—Ç:            ‚îÇ
‚îÇ  ‚Ä¢ internal_transfer() - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω—ã‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îÇ –ü—Ä–æ–≤–µ—Ä–∫–∞: calculate_wallet_address() == sender
         ‚ñº
    throw_unless(707, ...)
```

## üíæ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### Jetton Minter Storage

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Cell Root                               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  total_supply: Coins (VarUInt 16) ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  admin_address: MsgAddress         ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ jetton_content: ^Cell         ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ   ‚îî‚îÄ –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (TEP-64)      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ jetton_wallet_code: ^Cell     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ      ‚îî‚îÄ –ö–æ–¥ Wallet –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞      ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Jetton Wallet Storage

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Cell Root                               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  balance: Coins (VarUInt 16)      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  owner_address: MsgAddress         ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  jetton_master_address: MsgAddress‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ jetton_wallet_code: ^Cell     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ      ‚îî‚îÄ –ö–æ–¥ Wallet (–¥–ª—è –¥–µ–ø–ª–æ—è)  ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üßÆ –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤

### StateInit Formula

```
StateInit = 
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ split_depth: Maybe uint5    ‚îÇ = None (0, 2 bits)
  ‚îÇ special: Maybe TickTock     ‚îÇ = None (0, 1 bit)
  ‚îÇ code: Maybe ^Cell           ‚îÇ = Some(jetton_wallet_code)
  ‚îÇ data: Maybe ^Cell           ‚îÇ = Some(wallet_data)
  ‚îÇ library: HashmapE 256...    ‚îÇ = Empty (0, 1 bit)
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Address = 
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ anycast: Maybe Anycast      ‚îÇ = None (4, 3 bits)
  ‚îÇ workchain_id: int8          ‚îÇ = -1 (–¥–ª—è masterchain)
  ‚îÇ address: uint256            ‚îÇ = hash(StateInit)
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü—Ä–æ—Ü–µ—Å—Å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è

```python
def calculate_wallet_address(owner, jetton_master, wallet_code):
    # 1. –£–ø–∞–∫–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∫–æ—à–µ–ª—å–∫–∞
    wallet_data = pack_wallet_data(
        balance=0,
        owner=owner,
        master=jetton_master,
        code=wallet_code
    )
    
    # 2. –°–æ–∑–¥–∞–Ω–∏–µ StateInit
    state_init = StateInit(
        code=wallet_code,
        data=wallet_data
    )
    
    # 3. –•–µ—à StateInit
    hash = sha256(state_init.serialize())
    
    # 4. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞
    address = Address(
        workchain=-1,  # masterchain
        hash=hash
    )
    
    return address
```

## üì® –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π

### Mint Message

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Internal Message                   ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ Body:                          ‚îÇ ‚îÇ
‚îÇ ‚îÇ   op: uint32 = 21              ‚îÇ ‚îÇ
‚îÇ ‚îÇ   query_id: uint64             ‚îÇ ‚îÇ
‚îÇ ‚îÇ   to_address: MsgAddress       ‚îÇ ‚îÇ
‚îÇ ‚îÇ   ton_amount: Coins            ‚îÇ ‚îÇ
‚îÇ ‚îÇ   ‚îî‚îÄ master_msg: ^Cell         ‚îÇ ‚îÇ
‚îÇ ‚îÇ       ‚îú‚îÄ op: 0x178d4519        ‚îÇ ‚îÇ
‚îÇ ‚îÇ       ‚îú‚îÄ query_id: uint64      ‚îÇ ‚îÇ
‚îÇ ‚îÇ       ‚îú‚îÄ jetton_amount: Coins  ‚îÇ ‚îÇ
‚îÇ ‚îÇ       ‚îú‚îÄ from: addr_none       ‚îÇ ‚îÇ
‚îÇ ‚îÇ       ‚îú‚îÄ response: MsgAddress  ‚îÇ ‚îÇ
‚îÇ ‚îÇ       ‚îú‚îÄ forward_ton: Coins    ‚îÇ ‚îÇ
‚îÇ ‚îÇ       ‚îî‚îÄ forward_payload       ‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Transfer Message

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Internal Message                   ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ Body:                          ‚îÇ ‚îÇ
‚îÇ ‚îÇ   op: uint32 = 0xf8a7ea5       ‚îÇ ‚îÇ
‚îÇ ‚îÇ   query_id: uint64             ‚îÇ ‚îÇ
‚îÇ ‚îÇ   amount: Coins                ‚îÇ ‚îÇ
‚îÇ ‚îÇ   destination: MsgAddress      ‚îÇ ‚îÇ
‚îÇ ‚îÇ   response_destination: MsgAddr‚îÇ ‚îÇ
‚îÇ ‚îÇ   custom_payload: Maybe ^Cell  ‚îÇ ‚îÇ
‚îÇ ‚îÇ   forward_ton_amount: Coins    ‚îÇ ‚îÇ
‚îÇ ‚îÇ   forward_payload: Either ...  ‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Internal Transfer Message

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Internal Message                   ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ Body:                          ‚îÇ ‚îÇ
‚îÇ ‚îÇ   op: uint32 = 0x178d4519      ‚îÇ ‚îÇ
‚îÇ ‚îÇ   query_id: uint64             ‚îÇ ‚îÇ
‚îÇ ‚îÇ   amount: Coins                ‚îÇ ‚îÇ
‚îÇ ‚îÇ   from: MsgAddress             ‚îÇ ‚îÇ
‚îÇ ‚îÇ   response_destination: MsgAddr‚îÇ ‚îÇ
‚îÇ ‚îÇ   forward_ton_amount: Coins    ‚îÇ ‚îÇ
‚îÇ ‚îÇ   forward_payload: Either ...  ‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## ‚ö° Gas –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### Inline —Ñ—É–Ω–∫—Ü–∏–∏

```func
// –ß–∞—Å—Ç–æ –≤—ã–∑—ã–≤–∞–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–º–µ—á–µ–Ω—ã inline
(int, slice, cell, cell) load_data() inline {
    // –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –≤—Å—Ç–∞–≤–∏—Ç –∫–æ–¥ –Ω–∞–ø—Ä—è–º—É—é
    // –≠–∫–æ–Ω–æ–º–∏—è –Ω–∞ –≤—ã–∑–æ–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏
}
```

### –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ

```func
// –ò—Å–ø–æ–ª—å–∑—É–µ–º reference –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
cell jetton_content  // ^Cell –≤ storage
cell wallet_code     // ^Cell –≤ storage

// –í–º–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Å–µ–≥–æ –≤ root cell
```

### –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

```func
// –°–Ω–∞—á–∞–ª–∞ –¥–µ—à–µ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
if (in_msg_body.slice_empty?()) { return (); }

// –ü–æ—Ç–æ–º –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
var (balance, owner, ...) = load_data();

// –í –∫–æ–Ω—Ü–µ –¥–æ—Ä–æ–≥–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
throw_unless(705, equal_slices(owner, sender));
```

## üéØ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ bounce —Ñ–ª–∞–≥

```func
int flags = cs~load_uint(4);
if (flags & 1) { return (); }  // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º bounced messages
```

### 2. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ empty messages

```func
if (in_msg_body.slice_empty?()) { return (); }
```

### 3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ mode –¥–ª—è send

```func
send_raw_message(msg, 1);   // Pay fees separately, revert on errors
send_raw_message(msg, 64);  // Carry remaining balance
send_raw_message(msg, 2 + 64); // Ignore errors + carry balance
```

### 4. –í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –∞–¥—Ä–µ—Å–∞

```func
throw_unless(707,
    equal_slices(
        calculate_user_jetton_wallet_address(...),
        sender_address
    )
);
```

## üìê –î–∏–∞–≥—Ä–∞–º–º–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```
jetton-minter.fc
    ‚îÇ
    ‚îú‚îÄ> imports/stdlib.fc
    ‚îú‚îÄ> imports/op-codes.fc
    ‚îî‚îÄ> imports/jetton-params.fc

jetton-wallet.fc
    ‚îÇ
    ‚îú‚îÄ> imports/stdlib.fc
    ‚îú‚îÄ> imports/op-codes.fc
    ‚îî‚îÄ> imports/jetton-params.fc
```

## üîç –¢–æ—á–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

–ì–¥–µ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:

1. **–í Minter:**
   - Pausable –º–µ—Ö–∞–Ω–∏–∑–º
   - Upgrade logic
   - Fee –º–µ—Ö–∞–Ω–∏–∑–º

2. **–í Wallet:**
   - Allowance (–¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
   - Permit (EIP-2612 –∞–Ω–∞–ª–æ–≥)
   - Hooks –¥–ª—è DeFi –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

3. **–í Storage:**
   - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
   - Governance –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
   - Blacklist/Whitelist

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

| –û–ø–µ—Ä–∞—Ü–∏—è | Gas consumption | TON —Ç—Ä–µ–±—É–µ—Ç—Å—è |
|----------|----------------|---------------|
| Deploy Minter | ~0.05 TON | 0.05 TON |
| Mint | ~0.08 TON | 0.1 TON |
| Transfer (new wallet) | ~0.06 TON | 0.07 TON |
| Transfer (existing) | ~0.03 TON | 0.05 TON |
| Burn | ~0.03 TON | 0.05 TON |
| Get method | Free | 0 TON |

*–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –†–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –º–æ–≥—É—Ç –≤–∞—Ä—å–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Ç–µ–∫—É—â–∏—Ö —Ü–µ–Ω –Ω–∞ –≥–∞–∑.*

## üéì –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–≠—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –∫–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç —Å–≤–æ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç
- ‚úÖ **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–∞–∑–∞
- ‚úÖ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –ø–æ–ª–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ TEP-74
- ‚úÖ **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

**–ò–∑—É—á–∞–π—Ç–µ, –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ, —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —Å–≤–æ–∏ —Ç–æ–∫–µ–Ω—ã! üöÄ**
